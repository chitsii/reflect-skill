# チーム運用戦略

## 1. 運用モデル案

### 案A: 個人.reflect/ + チームCLAUDE.md（ユーザー提案）

```
個人の学習 (.reflect/)     チームルール (CLAUDE.md)
    │                           ▲
    │ 昇格                      │
    └───────────────────────────┘
```

- `.reflect/` は `.gitignore` に追加（個人用）
- 昇格時に CLAUDE.md へ手動追記

**利点:**
- シンプル
- 個人の好みがチームに強制されない
- CLAUDE.md は既にgit管理の仕組みがある

**課題:**
- 昇格の判断基準が曖昧
- 良い知識が埋もれる可能性
- CLAUDE.mdが肥大化するリスク

---

### 案B: .reflect/をgit管理（全員共有）

```
共有知識 (.reflect/)
    │
    ├── high/main.md   ← 全員が同じ知識を参照
    ├── medium/
    └── low/
```

**利点:**
- 知識が自動的に共有される
- 学習の重複がない

**課題:**
- 個人の好みがチームに強制される
- コンフリクトが頻発（複数人が同時に学習）
- 不要な知識が蓄積

---

### 案C: 個人.reflect/ + チーム.reflect-team/

```
個人 (.reflect/)          チーム (.reflect-team/)
    │                           ▲
    │ 昇格                      │
    └───────────────────────────┘
```

**利点:**
- 個人とチームの明確な分離
- 段階的な昇格が可能

**課題:**
- 構造が複雑
- 2箇所を読む必要がある
- メンテナンスコスト増

---

### 案D: 個人.reflect/ + CLAUDE.md + プロセス（推奨）

案Aをベースに、昇格プロセスを明確化。

```
個人 (.reflect/)
    │
    │ 1. 有用性を確認（複数回使用）
    │ 2. チームに提案（PR/Issue）
    │ 3. レビュー・承認
    ▼
チーム (CLAUDE.md)
```

---

## 2. 批判的レビュー

### 案A（シンプル）の深掘り

| 観点 | 評価 |
|------|------|
| 導入コスト | ◎ 低い |
| 運用コスト | ○ 低い（昇格時のみ作業） |
| 知識の活用度 | △ 良い知識が埋もれる可能性 |
| 一貫性 | ○ CLAUDE.mdで統一 |
| スケーラビリティ | △ 大規模チームでは課題 |

**結論:** 小〜中規模チーム（〜10人）には適切。大規模では案Dが必要。

---

## 3. 推奨: 案D（案A + プロセス）

### 3.1 基本方針

| 項目 | 方針 |
|------|------|
| `.reflect/` | `.gitignore` に追加（個人用） |
| CLAUDE.md | git管理（チーム共有） |
| 昇格方法 | PR/Issueでチームに提案 |

### 3.2 昇格基準

| 基準 | 説明 |
|------|------|
| **普遍性** | 個人の好みでなく、プロジェクト全体に適用可能 |
| **合意** | チームレビューで承認 |

**シンプルに:** 「これはチーム全体に適用すべき」と思ったら提案。チームレビューで判断。

### 3.3 昇格プロセス

```
1. 個人が.reflect/で学習を蓄積
    ↓
2. 有用なルールを発見
    ↓
3. Issue/PRで提案
   タイトル: [知識昇格] Button は shadcn から使用
   本文: 理由、例、影響範囲
    ↓
4. チームレビュー
    ↓
5. 承認後、CLAUDE.mdに追記
```

### 3.4 CLAUDE.mdの構造

```markdown
# プロジェクト名

## 概要
...

## コーディングルール（チーム共有）
<!-- 昇格された知識をここに追記 -->

### UI
- Button: `@/components/ui/button` から使用

### API
- エラー: Result型で返す

## 知識ベース
個人の学習: `.reflect/knowledge/` を活用。詳細は `/reflect-status` 参照。
```

### 3.5 CLAUDE.md肥大化対策

| 対策 | 説明 |
|------|------|
| **セクション分け** | カテゴリごとに整理 |
| **行数制限** | 100行を超えたら別ファイルに分離 |
| **定期レビュー** | 四半期ごとに古いルールを見直し |
| **外部参照** | 詳細は `/docs/rules/` に分離 |

---

## 4. 運用フロー図

```
┌─────────────────────────────────────────────────────────────┐
│                        日常作業                              │
├─────────────────────────────────────────────────────────────┤
│  開発者A                    開発者B                          │
│  ┌─────────┐                ┌─────────┐                     │
│  │.reflect/│                │.reflect/│                     │
│  │(個人用) │                │(個人用) │                     │
│  └────┬────┘                └────┬────┘                     │
│       │                          │                          │
│       │ /reflect で学習          │ /reflect で学習          │
│       ▼                          ▼                          │
│  ┌─────────┐                ┌─────────┐                     │
│  │個人知識 │                │個人知識 │                     │
│  │蓄積    │                │蓄積    │                     │
│  └─────────┘                └─────────┘                     │
└─────────────────────────────────────────────────────────────┘
                              │
                              │ 有用なルール発見
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                       昇格プロセス                           │
├─────────────────────────────────────────────────────────────┤
│  1. Issue/PR作成                                            │
│     「[知識昇格] ○○のルール提案」                           │
│                              │                              │
│  2. チームレビュー           │                              │
│     - 普遍性の確認           │                              │
│     - 副作用の検討           │                              │
│                              │                              │
│  3. 承認 → CLAUDE.mdに追記   │                              │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                    CLAUDE.md（チーム共有）                   │
├─────────────────────────────────────────────────────────────┤
│  ## コーディングルール                                       │
│  - 昇格されたルール1                                        │
│  - 昇格されたルール2                                        │
│  ...                                                        │
└─────────────────────────────────────────────────────────────┘
```

---

## 5. 結論

| 項目 | 推奨 |
|------|------|
| **基本方針** | 個人.reflect/ + チームCLAUDE.md |
| **昇格基準** | 普遍性あり + チーム合意 |
| **昇格方法** | Issue/PRでチーム提案 |
| **肥大化対策** | セクション分け、外部ファイル分離 |

**シンプルに:** 追跡・記録は不要。「チームに共有すべき」と思ったら提案、レビューで判断。
